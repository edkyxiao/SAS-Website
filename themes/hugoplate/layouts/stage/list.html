{{ define "main" }}
<!-- Stage Hire Section -->
<section class="section">
  <div class="container">
    <div class="row">
      <div class="lg:col-12">
        <!-- Stage Heading -->
        <div class="text-center mb-12">
          <h2 class="h1 mb-4">{{ .Title | markdownify }}</h2>
        </div>
        
        <!-- Stage Description -->
        {{ if .Params.description }}
          <div class="stage-description mb-12">
            <p class="text-lg leading-relaxed text-center max-w-4xl mx-auto">
              {{ .Params.description | markdownify }}
            </p>
          </div>
        {{ end }}
        
        <!-- Stage Layout -->
        <div class="stage-layout">
        <!-- Top Row: Standard Pricing, Standard Equipment, and Image -->
        <div class="stage-top-row">
          <div class="stage-details-top">
            {{ range first 2 .Params.stage_sections }}
              <div class="stage-section">
                <h3 class="stage-section-title">{{ .title | markdownify }}</h3>
                <div class="stage-section-content">
                  {{ .content | markdownify }}
                </div>
              </div>
            {{ end }}
          </div>
          
          <!-- Stage Image -->
          {{ if .Params.stage_images }}
            <div class="stage-images">
              <div class="image-wrapper">
                <button id="toggle-image-mode" class="image-toggle-btn" aria-label="Toggle stage lighting mode">
                  <svg id="sun-icon" class="toggle-icon sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"/>
                    <line x1="12" y1="1" x2="12" y2="3"/>
                    <line x1="12" y1="21" x2="12" y2="23"/>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                    <line x1="1" y1="12" x2="3" y2="12"/>
                    <line x1="21" y1="12" x2="23" y2="12"/>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                  </svg>
                  <svg id="moon-icon" class="toggle-icon moon-icon" style="display: none;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                  </svg>
                </button>
                <img id="mode-image" src="{{ .Params.stage_images.light_image | relURL }}" alt="stage lighting" class="stage-main-image" />
              </div>
            </div>
          {{ end }}
        </div>

        <!-- Bottom Row: Additional Equipment and Additional Services -->
        <div class="stage-bottom-row">
          {{ range after 2 .Params.stage_sections }}
            <div class="stage-section">
              <h3 class="stage-section-title">{{ .title | markdownify }}</h3>
              <div class="stage-section-content">
                {{ .content | markdownify }}
              </div>
            </div>
          {{ end }}
        </div>
      </div>
    </div>
  </div>
</section>

<script>
(function() {
  const toggleBtn = document.getElementById('toggle-image-mode');
  const modeImage = document.getElementById('mode-image');
  const sunIcon = document.getElementById('sun-icon');
  const moonIcon = document.getElementById('moon-icon');
  
  if (!toggleBtn || !modeImage || !sunIcon || !moonIcon) return;
  
  // Get image URLs from the img element's src
  const lightImage = '{{ .Params.stage_images.light_image | relURL }}';
  const darkImage = '{{ .Params.stage_images.dark_image | relURL }}';
  
  let isDark = false;
  
  toggleBtn.addEventListener('click', function() {
    isDark = !isDark;
    
    if (isDark) {
      modeImage.src = darkImage;
      sunIcon.style.display = 'none';
      moonIcon.style.display = 'block';
    } else {
      modeImage.src = lightImage;
      sunIcon.style.display = 'block';
      moonIcon.style.display = 'none';
    }
  });
})();
</script>

<style>
.stage-layout {
  max-width: 1200px;
  margin: 0 auto;
}

.stage-top-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  align-items: center;
  margin-bottom: 3rem;
}

.stage-details-top {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.stage-bottom-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin-top: 2rem;
}

</style>
{{ end }}

